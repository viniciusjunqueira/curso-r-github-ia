<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR" xml:lang="pt-BR"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinícius Silva Junqueira">

<title>Dia 3 – Introdução à Programação em R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2d96256768d086ddff59bdd79217461e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
</head><body class="nav-sidebar docked nav-fixed quarto-light">\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[L]{\small Vinícius Silva Junqueira}
\fancyhead[R]{\small \thepage}
\fancyfoot[L]{\small Curso R + GitHub + IA}
\fancyfoot[R]{\small junqueiravinicius@hotmail.com}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introdução à Programação em R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">Início</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-materiais" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Materiais</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-materiais">    
        <li>
    <a class="dropdown-item" href="../materiais.html">
 <span class="dropdown-text">Apostila &amp; Arquivos</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Dia 3</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Nesta página</h2>
   
  <ul>
  <li><a href="#transformação-io-e-visualização" id="toc-transformação-io-e-visualização" class="nav-link active" data-scroll-target="#transformação-io-e-visualização">Transformação, I/O e Visualização</a>
  <ul class="collapse">
  <li><a href="#revisão-rápida-do-dia-2-10-min" id="toc-revisão-rápida-do-dia-2-10-min" class="nav-link" data-scroll-target="#revisão-rápida-do-dia-2-10-min">Revisão Rápida do Dia 2 (≈ 10 min)</a></li>
  </ul></li>
  <li><a href="#parte-1-transformação-e-io-de-dados-19h00---20h30" id="toc-parte-1-transformação-e-io-de-dados-19h00---20h30" class="nav-link" data-scroll-target="#parte-1-transformação-e-io-de-dados-19h00---20h30">Parte 1: Transformação e I/O de Dados (19h00 - 20h30)</a>
  <ul class="collapse">
  <li><a href="#tidyr-transformando-estruturas-de-dados" id="toc-tidyr-transformando-estruturas-de-dados" class="nav-link" data-scroll-target="#tidyr-transformando-estruturas-de-dados">1.1 Tidyr: Transformando estruturas de dados</a>
  <ul class="collapse">
  <li><a href="#o-que-é-tidyr" id="toc-o-que-é-tidyr" class="nav-link" data-scroll-target="#o-que-é-tidyr">O que é Tidyr?</a></li>
  <li><a href="#pivot_longer-wide-para-long" id="toc-pivot_longer-wide-para-long" class="nav-link" data-scroll-target="#pivot_longer-wide-para-long">pivot_longer(): Wide para Long</a></li>
  <li><a href="#pivot_wider-long-para-wide" id="toc-pivot_wider-long-para-wide" class="nav-link" data-scroll-target="#pivot_wider-long-para-wide">pivot_wider(): Long para Wide</a></li>
  <li><a href="#separate-e-unite" id="toc-separate-e-unite" class="nav-link" data-scroll-target="#separate-e-unite">separate() e unite()</a></li>
  </ul></li>
  <li><a href="#tratamento-de-valores-ausentes-na" id="toc-tratamento-de-valores-ausentes-na" class="nav-link" data-scroll-target="#tratamento-de-valores-ausentes-na">1.2 Tratamento de Valores Ausentes (NA)</a>
  <ul class="collapse">
  <li><a href="#identificar-nas" id="toc-identificar-nas" class="nav-link" data-scroll-target="#identificar-nas">Identificar NAs</a></li>
  <li><a href="#remover-nas" id="toc-remover-nas" class="nav-link" data-scroll-target="#remover-nas">Remover NAs</a></li>
  <li><a href="#substituir-nas" id="toc-substituir-nas" class="nav-link" data-scroll-target="#substituir-nas">Substituir NAs</a></li>
  </ul></li>
  <li><a href="#leitura-e-escrita-de-dados-io" id="toc-leitura-e-escrita-de-dados-io" class="nav-link" data-scroll-target="#leitura-e-escrita-de-dados-io">1.3 Leitura e Escrita de Dados (I/O)</a>
  <ul class="collapse">
  <li><a href="#por-que-usar-readr-em-vez-de-funções-base-do-r" id="toc-por-que-usar-readr-em-vez-de-funções-base-do-r" class="nav-link" data-scroll-target="#por-que-usar-readr-em-vez-de-funções-base-do-r">Por que usar readr em vez de funções base do R?</a></li>
  <li><a href="#leitura-de-arquivos-csv" id="toc-leitura-de-arquivos-csv" class="nav-link" data-scroll-target="#leitura-de-arquivos-csv">Leitura de arquivos CSV</a></li>
  <li><a href="#o-problema-do-encoding-acentuação" id="toc-o-problema-do-encoding-acentuação" class="nav-link" data-scroll-target="#o-problema-do-encoding-acentuação">O problema do encoding (acentuação)</a></li>
  <li><a href="#leitura-de-arquivos-excel" id="toc-leitura-de-arquivos-excel" class="nav-link" data-scroll-target="#leitura-de-arquivos-excel">Leitura de arquivos Excel</a></li>
  <li><a href="#escrita-de-dados" id="toc-escrita-de-dados" class="nav-link" data-scroll-target="#escrita-de-dados">Escrita de dados</a></li>
  <li><a href="#organização-de-projetos-com-here" id="toc-organização-de-projetos-com-here" class="nav-link" data-scroll-target="#organização-de-projetos-com-here">Organização de Projetos com here()</a></li>
  <li><a href="#organização-de-projetos-com-here-1" id="toc-organização-de-projetos-com-here-1" class="nav-link" data-scroll-target="#organização-de-projetos-com-here-1">Organização de Projetos com here()</a></li>
  </ul></li>
  <li><a href="#ferramentas-úteis" id="toc-ferramentas-úteis" class="nav-link" data-scroll-target="#ferramentas-úteis">1.4 Ferramentas Úteis</a>
  <ul class="collapse">
  <li><a href="#janitor-limpeza-de-dados" id="toc-janitor-limpeza-de-dados" class="nav-link" data-scroll-target="#janitor-limpeza-de-dados">janitor: Limpeza de dados</a></li>
  <li><a href="#skimr-exploração-rápida" id="toc-skimr-exploração-rápida" class="nav-link" data-scroll-target="#skimr-exploração-rápida">skimr: Exploração rápida</a></li>
  <li><a href="#skimr-exploração-rápida-1" id="toc-skimr-exploração-rápida-1" class="nav-link" data-scroll-target="#skimr-exploração-rápida-1">skimr: Exploração rápida</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#intervalo-20h30---20h50" id="toc-intervalo-20h30---20h50" class="nav-link" data-scroll-target="#intervalo-20h30---20h50">INTERVALO (20h30 - 20h50)</a></li>
  <li><a href="#parte-2-visualização-com-ggplot2-20h50---22h00" id="toc-parte-2-visualização-com-ggplot2-20h50---22h00" class="nav-link" data-scroll-target="#parte-2-visualização-com-ggplot2-20h50---22h00">Parte 2: Visualização com ggplot2 (20h50 - 22h00)</a>
  <ul class="collapse">
  <li><a href="#gramática-de-gráficos" id="toc-gramática-de-gráficos" class="nav-link" data-scroll-target="#gramática-de-gráficos">2.1 Gramática de Gráficos</a>
  <ul class="collapse">
  <li><a href="#o-que-é-ggplot2" id="toc-o-que-é-ggplot2" class="nav-link" data-scroll-target="#o-que-é-ggplot2">O que é ggplot2?</a></li>
  <li><a href="#componentes-essenciais" id="toc-componentes-essenciais" class="nav-link" data-scroll-target="#componentes-essenciais">Componentes essenciais:</a></li>
  <li><a href="#a-lógica-do-soma-de-camadas" id="toc-a-lógica-do-soma-de-camadas" class="nav-link" data-scroll-target="#a-lógica-do-soma-de-camadas">A lógica do + (soma de camadas)</a></li>
  <li><a href="#aesthetics-globais-vs-locais" id="toc-aesthetics-globais-vs-locais" class="nav-link" data-scroll-target="#aesthetics-globais-vs-locais">Aesthetics globais vs locais</a></li>
  </ul></li>
  <li><a href="#tipos-de-gráficos-geoms" id="toc-tipos-de-gráficos-geoms" class="nav-link" data-scroll-target="#tipos-de-gráficos-geoms">2.2 Tipos de Gráficos (geoms)</a>
  <ul class="collapse">
  <li><a href="#escolhendo-o-tipo-certo-de-gráfico" id="toc-escolhendo-o-tipo-certo-de-gráfico" class="nav-link" data-scroll-target="#escolhendo-o-tipo-certo-de-gráfico">Escolhendo o tipo certo de gráfico</a></li>
  <li><a href="#gráfico-de-dispersão-geom_point" id="toc-gráfico-de-dispersão-geom_point" class="nav-link" data-scroll-target="#gráfico-de-dispersão-geom_point">Gráfico de Dispersão (geom_point)</a></li>
  <li><a href="#gráfico-de-barras-geom_bar-geom_col" id="toc-gráfico-de-barras-geom_bar-geom_col" class="nav-link" data-scroll-target="#gráfico-de-barras-geom_bar-geom_col">Gráfico de Barras (geom_bar / geom_col)</a></li>
  <li><a href="#boxplot-geom_boxplot" id="toc-boxplot-geom_boxplot" class="nav-link" data-scroll-target="#boxplot-geom_boxplot">Boxplot (geom_boxplot)</a></li>
  <li><a href="#gráfico-de-linhas-geom_line" id="toc-gráfico-de-linhas-geom_line" class="nav-link" data-scroll-target="#gráfico-de-linhas-geom_line">Gráfico de Linhas (geom_line)</a></li>
  <li><a href="#histograma-e-densidade-geom_histogram-geom_density" id="toc-histograma-e-densidade-geom_histogram-geom_density" class="nav-link" data-scroll-target="#histograma-e-densidade-geom_histogram-geom_density">Histograma e Densidade (geom_histogram / geom_density)</a></li>
  <li><a href="#histograma-e-densidade-geom_histogram-geom_density-1" id="toc-histograma-e-densidade-geom_histogram-geom_density-1" class="nav-link" data-scroll-target="#histograma-e-densidade-geom_histogram-geom_density-1">Histograma e Densidade (geom_histogram / geom_density)</a></li>
  </ul></li>
  <li><a href="#personalização" id="toc-personalização" class="nav-link" data-scroll-target="#personalização">2.3 Personalização</a>
  <ul class="collapse">
  <li><a href="#labels-labs---comunicando-claramente" id="toc-labels-labs---comunicando-claramente" class="nav-link" data-scroll-target="#labels-labs---comunicando-claramente">Labels (labs) - Comunicando claramente</a></li>
  <li><a href="#temas-themes---definindo-a-aparência" id="toc-temas-themes---definindo-a-aparência" class="nav-link" data-scroll-target="#temas-themes---definindo-a-aparência">Temas (themes) - Definindo a aparência</a></li>
  <li><a href="#escalas-scales---controle-fino" id="toc-escalas-scales---controle-fino" class="nav-link" data-scroll-target="#escalas-scales---controle-fino">Escalas (scales) - Controle fino</a></li>
  <li><a href="#temas-themes" id="toc-temas-themes" class="nav-link" data-scroll-target="#temas-themes">Temas (themes)</a></li>
  <li><a href="#escalas-scales" id="toc-escalas-scales" class="nav-link" data-scroll-target="#escalas-scales">Escalas (scales)</a></li>
  </ul></li>
  <li><a href="#combinando-gráficos-patchwork" id="toc-combinando-gráficos-patchwork" class="nav-link" data-scroll-target="#combinando-gráficos-patchwork">2.4 Combinando Gráficos (patchwork)</a></li>
  <li><a href="#salvando-gráficos-ggsave" id="toc-salvando-gráficos-ggsave" class="nav-link" data-scroll-target="#salvando-gráficos-ggsave">2.5 Salvando Gráficos (ggsave)</a></li>
  <li><a href="#salvando-gráficos-ggsave-1" id="toc-salvando-gráficos-ggsave-1" class="nav-link" data-scroll-target="#salvando-gráficos-ggsave-1">2.5 Salvando Gráficos (ggsave)</a></li>
  <li><a href="#exercícios-práticos" id="toc-exercícios-práticos" class="nav-link" data-scroll-target="#exercícios-práticos">Exercícios Práticos</a>
  <ul class="collapse">
  <li><a href="#exercício-1-transformação-de-dados" id="toc-exercício-1-transformação-de-dados" class="nav-link" data-scroll-target="#exercício-1-transformação-de-dados">Exercício 1: Transformação de dados</a></li>
  <li><a href="#exercício-2-limpeza-e-io" id="toc-exercício-2-limpeza-e-io" class="nav-link" data-scroll-target="#exercício-2-limpeza-e-io">Exercício 2: Limpeza e I/O</a></li>
  <li><a href="#exercício-3-visualização-completa" id="toc-exercício-3-visualização-completa" class="nav-link" data-scroll-target="#exercício-3-visualização-completa">Exercício 3: Visualização completa</a></li>
  </ul></li>
  <li><a href="#commit-do-dia" id="toc-commit-do-dia" class="nav-link" data-scroll-target="#commit-do-dia">Commit do Dia</a></li>
  <li><a href="#checklist-de-encerramento" id="toc-checklist-de-encerramento" class="nav-link" data-scroll-target="#checklist-de-encerramento">Checklist de Encerramento</a></li>
  <li><a href="#referências-rápidas" id="toc-referências-rápidas" class="nav-link" data-scroll-target="#referências-rápidas">Referências Rápidas</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Dia 3</h1>
<p class="subtitle lead">Introdução Programação em R com GitHub, ChatGPT e Claude</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Vinícius Silva Junqueira </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">8 de outubro de 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="transformação-io-e-visualização" class="level1">
<h1>Transformação, I/O e Visualização</h1>
<blockquote class="blockquote">
<p><strong>Objetivos do dia</strong></p>
<ul>
<li>Transformar dados com <strong>tidyr</strong> (pivot, separate, unite)</li>
<li>Tratar <strong>valores ausentes</strong> adequadamente</li>
<li>Ler e escrever dados de diferentes formatos (CSV, Excel)</li>
<li>Organizar projetos com <strong>here::here()</strong></li>
<li>Criar visualizações profissionais com <strong>ggplot2</strong></li>
<li>Combinar gráficos e personalizar temas</li>
</ul>
</blockquote>
<p><strong>Tempo previsto:</strong> 19h00–22h00 (intervalo 20h30–20h50)</p>
<hr>
<section id="revisão-rápida-do-dia-2-10-min" class="level2">
<h2 class="anchored" data-anchor-id="revisão-rápida-do-dia-2-10-min">Revisão Rápida do Dia 2 (≈ 10 min)</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipeline básico com dplyr (revisão)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(bill_length_mm)) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, bill_length_mm, body_mass_g) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">massa_kg =</span> body_mass_g <span class="sc">/</span> <span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">media_bico =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">media_massa =</span> <span class="fu">mean</span>(massa_kg)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(media_massa))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="parte-1-transformação-e-io-de-dados-19h00---20h30" class="level1">
<h1>Parte 1: Transformação e I/O de Dados (19h00 - 20h30)</h1>
<section id="tidyr-transformando-estruturas-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="tidyr-transformando-estruturas-de-dados">1.1 Tidyr: Transformando estruturas de dados</h2>
<section id="o-que-é-tidyr" class="level3">
<h3 class="anchored" data-anchor-id="o-que-é-tidyr">O que é Tidyr?</h3>
<p><strong>tidyr</strong> é o pacote para reorganizar a estrutura dos seus dados. É essencial porque muitas vezes recebemos dados em formatos “bagunçados” (como planilhas do Excel) e precisamos transformá-los em formato “tidy” para análise.</p>
<p><strong>Principais funções:</strong></p>
<ul>
<li><code>pivot_longer()</code> / <code>pivot_wider()</code>: converter entre formatos wide ↔︎ long</li>
<li><code>separate()</code> / <code>unite()</code>: dividir ou unir colunas</li>
<li><code>drop_na()</code>, <code>replace_na()</code>, <code>fill()</code>: tratar valores ausentes</li>
</ul>
</section>
<section id="pivot_longer-wide-para-long" class="level3">
<h3 class="anchored" data-anchor-id="pivot_longer-wide-para-long">pivot_longer(): Wide para Long</h3>
<p><strong>O que faz:</strong> Transforma múltiplas colunas em duas novas colunas: uma com os nomes das colunas originais e outra com seus valores.</p>
<p><strong>Quando usar:</strong> Quando você tem múltiplas colunas que na verdade representam valores de uma mesma variável. Por exemplo, se você tem colunas “jan_2024”, “fev_2024”, “mar_2024”, elas na verdade representam valores de uma variável “mês”.</p>
<p><strong>Por que usar:</strong> Dados no formato long (tidy) facilitam muito análises com dplyr e visualizações com ggplot2.</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados em formato WIDE (comum em planilhas)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>vendas_wide <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">produto =</span> <span class="fu">c</span>(<span class="st">"Notebook"</span>, <span class="st">"Mouse"</span>, <span class="st">"Teclado"</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">jan_2024 =</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">320</span>, <span class="dv">180</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fev_2024 =</span> <span class="fu">c</span>(<span class="dv">180</span>, <span class="dv">350</span>, <span class="dv">200</span>),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">mar_2024 =</span> <span class="fu">c</span>(<span class="dv">160</span>, <span class="dv">380</span>, <span class="dv">190</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>vendas_wide</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformar para LONG (formato tidy)</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>vendas_long <span class="ot">&lt;-</span> vendas_wide <span class="sc">%&gt;%</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> jan_2024<span class="sc">:</span>mar_2024,        <span class="co"># Colunas para transformar</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"mes_ano"</span>,             <span class="co"># Nome da nova coluna de categorias</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"quantidade"</span>          <span class="co"># Nome da nova coluna de valores</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>vendas_long</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpar a coluna mes_ano</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>vendas_long <span class="ot">&lt;-</span> vendas_long <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(mes_ano, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"ano"</span>), <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">mes =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      mes <span class="sc">==</span> <span class="st">"jan"</span> <span class="sc">~</span> <span class="st">"Janeiro"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>      mes <span class="sc">==</span> <span class="st">"fev"</span> <span class="sc">~</span> <span class="st">"Fevereiro"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>      mes <span class="sc">==</span> <span class="st">"mar"</span> <span class="sc">~</span> <span class="st">"Março"</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">ano =</span> <span class="fu">as.numeric</span>(ano)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>vendas_long</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Agora análises ficam fáceis!</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>vendas_long <span class="sc">%&gt;%</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(produto) <span class="sc">%&gt;%</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">sum</span>(quantidade),</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">media =</span> <span class="fu">mean</span>(quantidade)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="pivot_wider-long-para-wide" class="level3">
<h3 class="anchored" data-anchor-id="pivot_wider-long-para-wide">pivot_wider(): Long para Wide</h3>
<p><strong>O que faz:</strong> Transforma duas colunas (uma de categorias e outra de valores) em múltiplas colunas, onde cada categoria vira uma coluna.</p>
<p><strong>Quando usar:</strong> - Para criar tabelas de resumo mais legíveis (formato “planilha”) - Quando você precisa de uma coluna separada para cada categoria - Para preparar dados para certas análises ou relatórios</p>
<p><strong>É o inverso do pivot_longer()!</strong></p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reverter para wide</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>vendas_long <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"periodo"</span>, mes, ano, <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span>  <span class="co"># Unir mês e ano</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> periodo,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> quantidade</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo prático: notas de alunos</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>notas_long <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">aluno =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Ana"</span>, <span class="st">"Bruno"</span>, <span class="st">"Carla"</span>), <span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">disciplina =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Matemática"</span>, <span class="st">"Português"</span>, <span class="st">"História"</span>), <span class="dv">3</span>),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">nota =</span> <span class="fu">c</span>(<span class="fl">8.5</span>, <span class="fl">9.0</span>, <span class="fl">7.5</span>, <span class="fl">7.0</span>, <span class="fl">8.0</span>, <span class="fl">8.5</span>, <span class="fl">9.5</span>, <span class="fl">8.5</span>, <span class="fl">9.0</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>notas_long</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformar: disciplinas viram colunas</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>notas_wide <span class="ot">&lt;-</span> notas_long <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> disciplina,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> nota</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>notas_wide</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="separate-e-unite" class="level3">
<h3 class="anchored" data-anchor-id="separate-e-unite">separate() e unite()</h3>
<p><strong>separate():</strong> Divide uma coluna em múltiplas colunas usando um separador.</p>
<p><strong>Quando usar separate():</strong> - Quando você tem informações combinadas em uma única coluna (ex: “São Paulo-SP”) - Para extrair partes específicas de um texto (ex: dia, mês, ano de uma data) - Para limpar dados mal formatados</p>
<p><strong>Argumentos principais:</strong> - <code>col</code>: coluna a ser dividida - <code>into</code>: vetor com nomes das novas colunas - <code>sep</code>: separador (pode ser um caractere ou regex) - <code>extra</code>: o que fazer com pedaços extras (“warn”, “drop”, “merge”)</p>
<p><strong>unite():</strong> Combina múltiplas colunas em uma única coluna.</p>
<p><strong>Quando usar unite():</strong> - Para criar identificadores únicos combinando campos (ex: “SP_001”) - Para formatar datas ou textos de maneira específica - Para reverter um <code>separate()</code> anterior</p>
<p><strong>Argumentos principais:</strong> - <code>col</code>: nome da nova coluna - <code>...</code>: colunas a combinar - <code>sep</code>: separador para usar na união</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados com informação combinada</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nome_completo =</span> <span class="fu">c</span>(<span class="st">"Ana Silva"</span>, <span class="st">"Bruno Costa"</span>, <span class="st">"Carla Dias"</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_nasc =</span> <span class="fu">c</span>(<span class="st">"15/03/1995"</span>, <span class="st">"22/07/1998"</span>, <span class="st">"10/11/1993"</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">cidade_estado =</span> <span class="fu">c</span>(<span class="st">"São Paulo-SP"</span>, <span class="st">"Rio de Janeiro-RJ"</span>, <span class="st">"Belo Horizonte-MG"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>dados</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># SEPARATE: dividir colunas</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>dados_separados <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(nome_completo, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"nome"</span>, <span class="st">"sobrenome"</span>), <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(data_nasc, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"dia"</span>, <span class="st">"mes"</span>, <span class="st">"ano"</span>), <span class="at">sep =</span> <span class="st">"/"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(cidade_estado, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cidade"</span>, <span class="st">"estado"</span>), <span class="at">sep =</span> <span class="st">"-"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>dados_separados</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># UNITE: combinar colunas</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>dados_unidos <span class="ot">&lt;-</span> dados_separados <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"nome_completo"</span>, nome, sobrenome, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"data_nascimento"</span>, dia, mes, ano, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>dados_unidos</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo prático: limpar dados de telefone</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>telefones <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">cliente =</span> <span class="fu">c</span>(<span class="st">"João"</span>, <span class="st">"Maria"</span>, <span class="st">"Pedro"</span>),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">telefone =</span> <span class="fu">c</span>(<span class="st">"11-98765-4321"</span>, <span class="st">"21-99876-5432"</span>, <span class="st">"31-97654-3210"</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>telefones <span class="sc">%&gt;%</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(telefone, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ddd"</span>, <span class="st">"numero"</span>), <span class="at">sep =</span> <span class="st">"-"</span>, <span class="at">extra =</span> <span class="st">"merge"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="tratamento-de-valores-ausentes-na" class="level2">
<h2 class="anchored" data-anchor-id="tratamento-de-valores-ausentes-na">1.2 Tratamento de Valores Ausentes (NA)</h2>
<p><strong>O que são NAs?</strong></p>
<p><code>NA</code> (Not Available) representa valores ausentes ou desconhecidos em R. Eles aparecem por diversos motivos: - Dados não coletados - Informação não disponível - Erros na coleta - Junção de tabelas sem correspondência</p>
<p><strong>Por que tratar NAs é importante?</strong></p>
<ul>
<li>Muitas funções retornam <code>NA</code> se houver qualquer <code>NA</code> nos dados</li>
<li>NAs podem distorcer análises estatísticas</li>
<li>Alguns modelos não aceitam NAs</li>
<li>É importante decidir conscientemente o que fazer com dados ausentes</li>
</ul>
<p><strong>Três estratégias principais:</strong> 1. <strong>Identificar</strong>: entender onde e quantos NAs existem 2. <strong>Remover</strong>: excluir linhas/colunas com NAs (quando apropriado) 3. <strong>Imputar</strong>: substituir NAs por valores estimados</p>
<section id="identificar-nas" class="level3">
<h3 class="anchored" data-anchor-id="identificar-nas">Identificar NAs</h3>
<p><strong>Funções úteis:</strong> - <code>is.na()</code>: retorna TRUE/FALSE para cada elemento - <code>sum(is.na())</code>: conta quantos NAs existem - <code>mean(is.na())</code>: proporção de NAs - <code>complete.cases()</code>: identifica linhas sem nenhum NA</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar dados com NA para exemplo</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dados_na <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">nome =</span> <span class="fu">c</span>(<span class="st">"Ana"</span>, <span class="st">"Bruno"</span>, <span class="cn">NA</span>, <span class="st">"Diego"</span>, <span class="st">"Elena"</span>, <span class="st">"Felipe"</span>, <span class="cn">NA</span>, <span class="st">"Hugo"</span>, <span class="st">"Iris"</span>, <span class="st">"João"</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">idade =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="cn">NA</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="cn">NA</span>, <span class="dv">35</span>, <span class="dv">22</span>, <span class="cn">NA</span>, <span class="dv">27</span>, <span class="dv">29</span>),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">salario =</span> <span class="fu">c</span>(<span class="dv">3000</span>, <span class="dv">4500</span>, <span class="cn">NA</span>, <span class="dv">5000</span>, <span class="dv">3500</span>, <span class="cn">NA</span>, <span class="dv">4000</span>, <span class="dv">4800</span>, <span class="cn">NA</span>, <span class="dv">5200</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>dados_na</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar NAs por coluna</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporção de NAs</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">mean</span>(<span class="fu">is.na</span>(.)) <span class="sc">*</span> <span class="dv">100</span>))</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar linhas com qualquer NA</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">everything</span>(), is.na))</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar linhas completas (sem NA)</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">everything</span>(), <span class="sc">~!</span><span class="fu">is.na</span>(.)))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="remover-nas" class="level3">
<h3 class="anchored" data-anchor-id="remover-nas">Remover NAs</h3>
<p><strong>Quando remover NAs:</strong> - Quando representam uma porção pequena dos dados (&lt; 5%) - Quando são aleatórios (não há padrão sistemático) - Quando você tem dados suficientes mesmo após remoção</p>
<p><strong>Cuidado:</strong> Remover NAs pode introduzir viés se eles não forem aleatórios!</p>
<p><strong>Funções:</strong> - <code>drop_na()</code>: remove linhas com qualquer NA (ou em colunas específicas) - <code>na.omit()</code>: similar ao drop_na (base R) - <code>filter(!is.na())</code>: remove NAs de colunas específicas</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover linhas com QUALQUER NA</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover linhas com NA em colunas específicas</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(idade, salario)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Manter apenas linhas completas</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()  <span class="co"># base R</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="substituir-nas" class="level3">
<h3 class="anchored" data-anchor-id="substituir-nas">Substituir NAs</h3>
<p><strong>Métodos de imputação (substituição):</strong></p>
<ol type="1">
<li><strong>Valor fixo</strong>: substituir por 0, “Desconhecido”, etc.
<ul>
<li>Use quando o NA tem significado específico (ex: ausência = zero)</li>
</ul></li>
<li><strong>Medida central</strong>: substituir por média, mediana ou moda
<ul>
<li>Use para variáveis numéricas quando NAs são poucos e aleatórios</li>
<li>Mediana é mais robusta a outliers que média</li>
</ul></li>
<li><strong>Forward/Backward fill</strong>: usar valor anterior ou posterior
<ul>
<li>Use para séries temporais ou dados sequenciais</li>
<li><code>fill(.direction = "down")</code>: preenche para baixo</li>
<li><code>fill(.direction = "up")</code>: preenche para cima</li>
</ul></li>
<li><strong>Interpolação</strong>: estimar baseado em valores próximos
<ul>
<li>Use para séries temporais quando há padrão</li>
<li>Mais sofisticado que fill</li>
</ul></li>
</ol>
<p><strong>Funções:</strong> - <code>replace_na()</code>: substitui por valor específico - <code>ifelse()</code> + <code>mean()/median()</code>: substitui por estatística - <code>fill()</code>: preenche com valores adjacentes</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Substituir por valor específico</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nome =</span> <span class="fu">replace_na</span>(nome, <span class="st">"Desconhecido"</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">idade =</span> <span class="fu">replace_na</span>(idade, <span class="dv">0</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Substituir por medida central</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>dados_na <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">idade =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(idade), <span class="fu">median</span>(idade, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), idade),</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">salario =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(salario), <span class="fu">mean</span>(salario, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), salario)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Preencher com valor anterior/posterior (fill)</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>dados_sequencial <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">vendas =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">120</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">150</span>, <span class="cn">NA</span>, <span class="dv">170</span>, <span class="dv">180</span>, <span class="cn">NA</span>, <span class="dv">200</span>, <span class="dv">210</span>, <span class="cn">NA</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>dados_sequencial</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Preencher para baixo (forward fill)</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>dados_sequencial <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(vendas, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Preencher para cima (backward fill)</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>dados_sequencial <span class="sc">%&gt;%</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(vendas, <span class="at">.direction =</span> <span class="st">"up"</span>)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Interpolação linear (mais sofisticado)</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>dados_sequencial <span class="sc">%&gt;%</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vendas =</span> zoo<span class="sc">::</span><span class="fu">na.approx</span>(vendas, <span class="at">na.rm =</span> <span class="cn">FALSE</span>))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="leitura-e-escrita-de-dados-io" class="level2">
<h2 class="anchored" data-anchor-id="leitura-e-escrita-de-dados-io">1.3 Leitura e Escrita de Dados (I/O)</h2>
<p><strong>I/O = Input/Output</strong> (Entrada/Saída)</p>
<p>A capacidade de ler e escrever arquivos é fundamental para qualquer análise de dados. Você precisará: - <strong>Importar</strong> dados de diversas fontes (CSV, Excel, bancos de dados) - <strong>Exportar</strong> resultados para compartilhar ou usar em outras ferramentas</p>
<section id="por-que-usar-readr-em-vez-de-funções-base-do-r" class="level3">
<h3 class="anchored" data-anchor-id="por-que-usar-readr-em-vez-de-funções-base-do-r">Por que usar readr em vez de funções base do R?</h3>
<p><strong>readr</strong> (parte do tidyverse) é melhor porque: - ✅ Mais rápido (até 10x) - ✅ Produz tibbles em vez de data.frames - ✅ Não converte strings em fatores automaticamente - ✅ Melhor tratamento de encoding (acentos!) - ✅ Mensagens mais claras sobre tipos de colunas - ✅ Sintaxe consistente e intuitiva</p>
</section>
<section id="leitura-de-arquivos-csv" class="level3">
<h3 class="anchored" data-anchor-id="leitura-de-arquivos-csv">Leitura de arquivos CSV</h3>
<p><strong>CSV = Comma-Separated Values</strong> (Valores Separados por Vírgula)</p>
<p>É o formato mais comum para dados tabulares. Mas atenção: existem variações!</p>
<p><strong>read_csv()</strong>: Para arquivos com separador <strong>vírgula</strong> (padrão internacional) - Exemplo: <code>1,2,3</code> - Decimal com ponto: <code>3.14</code></p>
<p><strong>read_csv2()</strong>: Para arquivos com separador <strong>ponto-e-vírgula</strong> (padrão brasileiro) - Exemplo: <code>1;2;3</code> - Decimal com vírgula: <code>3,14</code></p>
<p><strong>Parâmetros importantes:</strong> - <code>col_types</code>: especificar tipos das colunas (evita surpresas) - <code>locale</code>: controlar encoding e formatos regionais - <code>skip</code>: pular linhas iniciais (cabeçalhos, notas) - <code>n_max</code>: ler apenas primeiras linhas (para testar) - <code>na</code>: definir quais valores representam NA</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ler CSV com separador vírgula (padrão internacional)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(here("data", "raw", "dados.csv"))</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ler CSV com separador ponto-e-vírgula (padrão brasileiro)</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv2(here("data", "raw", "dados.csv"))</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar encoding (importante para acentos!)</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   here("data", "raw", "dados.csv"),</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   locale = locale(encoding = "UTF-8")</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Para arquivos com encoding Windows (latin1)</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   here("data", "raw", "dados.csv"),</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   locale = locale(encoding = "latin1")</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar tipos de colunas</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   here("data", "raw", "dados.csv"),</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">#   col_types = cols(</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">#     id = col_integer(),</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co">#     nome = col_character(),</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">#     data = col_date(format = "%d/%m/%Y"),</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     valor = col_double()</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Pular linhas iniciais</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(here("data", "raw", "dados.csv"), skip = 2)</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Ler apenas primeiras linhas (para testar)</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="co"># dados_preview &lt;- read_csv(here("data", "raw", "dados.csv"), n_max = 100)</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="o-problema-do-encoding-acentuação" class="level3">
<h3 class="anchored" data-anchor-id="o-problema-do-encoding-acentuação">O problema do encoding (acentuação)</h3>
<p><strong>Encoding</strong> define como caracteres especiais (acentos, ç, etc.) são armazenados.</p>
<p><strong>Problemas comuns:</strong> - Arquivo criado no Windows → ler no Mac/Linux → acentos aparecem como � - Excel salva em encoding diferente → R lê errado → “São Paulo” vira “SÃ£o Paulo”</p>
<p><strong>Soluções:</strong> - <strong>UTF-8</strong>: padrão universal moderno - SEMPRE use para novos arquivos - <strong>latin1 (ISO-8859-1)</strong>: comum em arquivos Windows antigos - Use <code>locale(encoding = "...")</code> para especificar</p>
<p><strong>Como descobrir o encoding?</strong> 1. Abra o arquivo no RStudio e veja se acentos estão corretos 2. Teste UTF-8 primeiro, depois latin1 3. Use <code>guess_encoding()</code> do readr para ajudar</p>
</section>
<section id="leitura-de-arquivos-excel" class="level3">
<h3 class="anchored" data-anchor-id="leitura-de-arquivos-excel">Leitura de arquivos Excel</h3>
<p><strong>Por que ler Excel?</strong> - Formato muito usado em empresas e pesquisas - Pode conter múltiplas planilhas - Formatação e fórmulas (que precisamos extrair)</p>
<p><strong>readxl vs writexl:</strong> - <code>readxl</code>: LER arquivos Excel (.xlsx, .xls) - <code>writexl</code>: ESCREVER arquivos Excel</p>
<p><strong>Vantagens do readxl:</strong> - ✅ Não precisa de Java ou Excel instalado - ✅ Funciona em Windows, Mac e Linux - ✅ Lê .xlsx (novo) e .xls (antigo) - ✅ Preserva tipos de dados</p>
<p><strong>Parâmetros úteis:</strong> - <code>sheet</code>: qual planilha ler (por nome ou número) - <code>range</code>: ler apenas parte da planilha (ex: “A1:E100”) - <code>skip</code>: pular linhas iniciais - <code>col_names</code>: se primeira linha tem nomes das colunas - <code>na</code>: valores que devem ser tratados como NA</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ler primeira planilha</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_excel(here("data", "raw", "planilha.xlsx"))</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar planilha por nome ou número</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_excel(here("data", "raw", "planilha.xlsx"), sheet = "Vendas")</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_excel(here("data", "raw", "planilha.xlsx"), sheet = 2)</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar intervalo de células</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_excel(</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   here("data", "raw", "planilha.xlsx"), </span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   range = "A1:E100"</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pular linhas</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_excel(here("data", "raw", "planilha.xlsx"), skip = 3)</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver nomes das planilhas</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># excel_sheets(here("data", "raw", "planilha.xlsx"))</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="escrita-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="escrita-de-dados">Escrita de dados</h3>
<p><strong>Por que exportar dados?</strong> - Compartilhar resultados com colegas - Backup de dados processados - Usar em outras ferramentas (Excel, Power BI, Python) - Guardar resultados intermediários de análises longas</p>
<p><strong>Formatos e quando usar:</strong></p>
<ol type="1">
<li><strong>CSV</strong> (<code>write_csv</code>, <code>write_csv2</code>):
<ul>
<li>✅ Universal - abre em qualquer programa</li>
<li>✅ Tamanho pequeno (texto simples)</li>
<li>❌ Não preserva formatação</li>
<li>❌ Problemas com encoding</li>
<li><strong>Use para:</strong> compartilhar dados simples</li>
</ul></li>
<li><strong>Excel</strong> (<code>write_xlsx</code>):
<ul>
<li>✅ Fácil para não-programadores abrirem</li>
<li>✅ Mantém formatação básica</li>
<li>❌ Tamanho maior que CSV</li>
<li><strong>Use para:</strong> relatórios para stakeholders</li>
</ul></li>
<li><strong>RDS</strong> (<code>saveRDS</code>, <code>readRDS</code>):
<ul>
<li>✅ Preserva tipos de dados perfeitamente</li>
<li>✅ Comprimido (tamanho pequeno)</li>
<li>✅ Rápido para ler/escrever</li>
<li>❌ Só abre no R</li>
<li><strong>Use para:</strong> dados intermediários, objetos R complexos</li>
</ul></li>
</ol>
<p><strong>Dica:</strong> Sempre salve dados originais em <code>data/raw/</code> e processados em <code>data/processed/</code></p>
</section>
<section id="organização-de-projetos-com-here" class="level3">
<h3 class="anchored" data-anchor-id="organização-de-projetos-com-here">Organização de Projetos com here()</h3>
<p><strong>O problema dos caminhos:</strong></p>
<p>Caminho absoluto (❌ NÃO USAR):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/Users/vinicius/Documents/projeto/data/dados.csv"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Problema:</strong> Só funciona no SEU computador!</p>
<p>Caminho relativo com setwd() (❌ EVITAR):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/vinicius/Documents/projeto"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/dados.csv"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Problema:</strong> Frágil, não funciona em scripts executados de outros lugares</p>
<p><strong>A solução: here() (✅ SEMPRE USAR)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dados.csv"</span>))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Vantagens do here():</strong> - ✅ Funciona em Windows, Mac e Linux - ✅ Funciona independente de onde você executa o script - ✅ Colaboração: código funciona para todos - ✅ Raiz do projeto é detectada automaticamente (.Rproj)</p>
<p><strong>Como funciona:</strong> 1. here() encontra a raiz do projeto (onde está o .Rproj) 2. Constrói caminhos a partir dessa raiz 3. Usa separadores corretos para cada sistema operacional</p>
<p><strong>Estrutura recomendada de projeto:</strong></p>
<pre><code>meu-projeto/
├── meu-projeto.Rproj    ← here() usa isso como raiz
├── data/
│   ├── raw/             ← Dados originais (NUNCA modificar!)
│   └── processed/       ← Dados processados/limpos
├── scripts/             ← Scripts de análise
├── output/
│   ├── figures/         ← Gráficos salvos
│   └── tables/          ← Tabelas exportadas
├── docs/                ← Relatórios e documentação
└── README.md            ← Descrição do projeto</code></pre>
<p><strong>Boas práticas:</strong> - Sempre use projetos <code>.Rproj</code> - Sempre use <code>here()</code> para caminhos - Nunca modifique dados em <code>data/raw/</code> - Documente estrutura no README.md</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar dados de exemplo</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dados_exemplo <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">nome =</span> <span class="fu">c</span>(<span class="st">"Ana"</span>, <span class="st">"Bruno"</span>, <span class="st">"Carla"</span>, <span class="st">"Diego"</span>, <span class="st">"Elena"</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nota =</span> <span class="fu">c</span>(<span class="fl">8.5</span>, <span class="fl">7.0</span>, <span class="fl">9.0</span>, <span class="fl">6.5</span>, <span class="fl">8.0</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como CSV (UTF-8)</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(dados_exemplo, here("output", "tables", "notas.csv"))</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como CSV com separador ponto-e-vírgula</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv2(dados_exemplo, here("output", "tables", "notas.csv"))</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como Excel (requer writexl)</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># library(writexl)</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># write_xlsx(dados_exemplo, here("output", "tables", "notas.xlsx"))</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como RDS (formato nativo R - preserva tipos)</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(dados_exemplo, here("output", "tables", "notas.rds"))</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Ler RDS</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- readRDS(here("output", "tables", "notas.rds"))</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="organização-de-projetos-com-here-1" class="level3">
<h3 class="anchored" data-anchor-id="organização-de-projetos-com-here-1">Organização de Projetos com here()</h3>
<p><strong>Por que usar here()?</strong></p>
<p>O pacote <code>here</code> resolve caminhos relativos de forma portável, funcionando em qualquer sistema operacional e evitando problemas com diretórios de trabalho.</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura recomendada de projeto:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># meu-projeto/</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ├── meu-projeto.Rproj</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ├── data/</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># │   ├── raw/          # Dados originais (nunca modificar!)</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># │   └── processed/    # Dados processados</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ├── scripts/          # Scripts R</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ├── output/</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># │   ├── figures/      # Gráficos</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># │   └── tables/       # Tabelas</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ├── docs/             # Documentação e relatórios</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># └── README.md</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver raiz do projeto</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>()</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Construir caminhos portáveis</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"raw"</span>, <span class="st">"dados.csv"</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"figures"</span>, <span class="st">"grafico1.png"</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>(<span class="st">"scripts"</span>, <span class="st">"01_analise.R"</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de uso completo</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co"># dados &lt;- read_csv(here("data", "raw", "vendas.csv"))</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co"># dados_processados &lt;- dados %&gt;%</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(ano == 2024) %&gt;%</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(vendas_milhares = vendas / 1000)</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(dados_processados, here("data", "processed", "vendas_2024.csv"))</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="ferramentas-úteis" class="level2">
<h2 class="anchored" data-anchor-id="ferramentas-úteis">1.4 Ferramentas Úteis</h2>
<section id="janitor-limpeza-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="janitor-limpeza-de-dados">janitor: Limpeza de dados</h3>
<p><strong>O que é janitor?</strong></p>
<p>janitor é um pacote focado em <strong>limpar dados bagunçados</strong> - especialmente aqueles que vêm de planilhas Excel criadas por humanos (não por programas).</p>
<p><strong>Problemas comuns que janitor resolve:</strong> - Nomes de colunas com espaços, acentos, caracteres especiais - Linhas e colunas completamente vazias - Linhas duplicadas - Formatação inconsistente</p>
<p><strong>Principais funções:</strong></p>
<p><strong>1. clean_names()</strong>: Limpa nomes de colunas automaticamente - Remove espaços → substitui por <code>_</code> - Remove acentos e caracteres especiais - Converte tudo para minúsculas - Formato snake_case - <strong>Use sempre que importar dados de Excel!</strong></p>
<p><strong>2. tabyl()</strong>: Tabelas de frequência melhoradas - Mais informativa que <code>table()</code> do R base - Funciona bem com pipes - Fácil adicionar percentuais e totais</p>
<p><strong>3. adorn_</strong>*: Funções para embelezar tabelas - <code>adorn_percentages()</code>: adiciona percentuais - <code>adorn_pct_formatting()</code>: formata percentuais - <code>adorn_ns()</code>: mostra contagens junto com percentuais - <code>adorn_totals()</code>: adiciona linha/coluna de totais</p>
<p><strong>4. remove_empty()</strong>: Remove linhas/colunas vazias - Comum em dados de Excel com células vazias fantasmas - <code>remove_empty("rows")</code>: remove linhas vazias - <code>remove_empty("cols")</code>: remove colunas vazias - <code>remove_empty(c("rows", "cols"))</code>: remove ambos</p>
<p><strong>5. get_dupes()</strong>: Encontra linhas duplicadas - Mostra quais linhas estão duplicadas - Mais informativo que <code>duplicated()</code></p>
</section>
<section id="skimr-exploração-rápida" class="level3">
<h3 class="anchored" data-anchor-id="skimr-exploração-rápida">skimr: Exploração rápida</h3>
<p><strong>O que é skimr?</strong></p>
<p>skimr fornece <strong>resumos estatísticos completos</strong> de forma rápida e visual - muito melhor que <code>summary()</code> do R base.</p>
<p><strong>Vantagens do skim():</strong> - ✅ Um resumo por tipo de variável (numérico, texto, data, etc.) - ✅ Mostra quantidade de dados ausentes - ✅ Histogramas inline (mini-histogramas na tabela!) - ✅ Estatísticas relevantes automaticamente - ✅ Funciona com group_by() para resumos por grupo - ✅ Output limpo e organizado</p>
<p><strong>O que skim() mostra:</strong></p>
<p><strong>Para variáveis numéricas:</strong> - n_missing: quantos NAs - complete_rate: % de valores completos - mean, sd: média e desvio padrão - p0, p25, p50, p75, p100: percentis (min, Q1, mediana, Q3, max) - hist: mini-histograma visual!</p>
<p><strong>Para variáveis de texto:</strong> - n_missing, complete_rate - min, max: comprimento mínimo/máximo - empty: quantas strings vazias - n_unique: quantos valores únicos</p>
<p><strong>Para variáveis lógicas:</strong> - mean: proporção de TRUEs - count: contagem de TRUE/FALSE</p>
<p><strong>Uso típico:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploração inicial rápida</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">skim</span>()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Por grupo</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(categoria) <span class="sc">%&gt;%</span> <span class="fu">skim</span>()</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apenas numéricos</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">skim</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Quando usar:</strong> - Primeira exploração de um dataset novo - Checagem rápida de qualidade dos dados - Identificação de outliers e problemas - Documentação de características dos dados</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados bagunçados (comum em planilhas)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>dados_sujos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Nome Completo</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Ana Silva"</span>, <span class="st">"Bruno Costa"</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Idade (anos)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Salário Mensal (R$)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">6000</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">E-mail!!!</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"ana@email.com"</span>, <span class="st">"bruno@email.com"</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>dados_sujos</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpar nomes de colunas automaticamente</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>dados_limpos <span class="ot">&lt;-</span> dados_sujos <span class="sc">%&gt;%</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>dados_limpos</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dados_limpos)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabulação cruzada melhorada</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(species, island) <span class="sc">%&gt;%</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover linhas/colunas completamente vazias</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>dados_com_vazios <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>),</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),  <span class="co"># Coluna vazia</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>dados_com_vazios <span class="sc">%&gt;%</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_empty</span>(<span class="fu">c</span>(<span class="st">"rows"</span>, <span class="st">"cols"</span>))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="skimr-exploração-rápida-1" class="level3">
<h3 class="anchored" data-anchor-id="skimr-exploração-rápida-1">skimr: Exploração rápida</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumo estatístico completo</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Por grupo</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizar saída</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, n_missing, numeric.mean, numeric.sd)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
</section>
<section id="intervalo-20h30---20h50" class="level1">
<h1>INTERVALO (20h30 - 20h50)</h1>
<p>Aproveite para: - Revisar conceitos de transformação - Experimentar com seus dados - Preparar para ggplot2!</p>
<hr>
</section>
<section id="parte-2-visualização-com-ggplot2-20h50---22h00" class="level1">
<h1>Parte 2: Visualização com ggplot2 (20h50 - 22h00)</h1>
<section id="gramática-de-gráficos" class="level2">
<h2 class="anchored" data-anchor-id="gramática-de-gráficos">2.1 Gramática de Gráficos</h2>
<section id="o-que-é-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="o-que-é-ggplot2">O que é ggplot2?</h3>
<p><strong>ggplot2</strong> é um sistema de visualização baseado na “Grammar of Graphics” (Gramática de Gráficos) - uma filosofia que trata gráficos como sentenças construídas por camadas.</p>
<p><strong>Por que ggplot2 é revolucionário?</strong> - Você <strong>descreve</strong> o que quer ver, não <strong>como</strong> desenhar - Gráficos complexos são combinações de camadas simples - Consistência: mesma lógica para todos os tipos de gráficos - Flexibilidade: fácil personalizar qualquer aspecto</p>
<p><strong>Analogia:</strong> É como escrever uma frase: - <strong>Sujeito</strong> (data): seus dados - <strong>Verbo</strong> (geom): o que mostrar (pontos, linhas, barras) - <strong>Advérbios</strong> (aes): como mapear variáveis (x, y, cor, tamanho) - <strong>Adjetivos</strong> (themes, scales): aparência e estilo</p>
</section>
<section id="componentes-essenciais" class="level3">
<h3 class="anchored" data-anchor-id="componentes-essenciais">Componentes essenciais:</h3>
<p><strong>1. Data (dados)</strong>: O dataset que você quer visualizar</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)  <span class="co"># Apenas especifica os dados</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>2. Aesthetics (aes)</strong>: Mapeamento de variáveis para propriedades visuais - <code>x</code>, <code>y</code>: posição nos eixos - <code>color</code>: cor de pontos/linhas - <code>fill</code>: cor de preenchimento - <code>size</code>: tamanho - <code>shape</code>: forma (círculo, triângulo, etc.) - <code>alpha</code>: transparência (0 = invisível, 1 = opaco) - <code>linetype</code>: tipo de linha (sólida, tracejada, etc.)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de aesthetics</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,        <span class="co"># eixo x</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> body_mass_g,               <span class="co"># eixo y</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> species,               <span class="co"># cor por espécie</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> bill_length_mm)         <span class="co"># tamanho por comprimento do bico</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>3. Geometries (geom)</strong>: Tipo de representação visual - <code>geom_point()</code>: pontos (gráfico de dispersão) - <code>geom_line()</code>: linhas - <code>geom_bar()</code>: barras - <code>geom_boxplot()</code>: boxplots - <code>geom_histogram()</code>: histogramas - E muitos outros…</p>
<p><strong>4. Scales</strong>: Controle fino de como os dados são mapeados - <code>scale_x_continuous()</code>: escala do eixo x - <code>scale_color_manual()</code>: cores personalizadas - <code>scale_y_log10()</code>: escala logarítmica</p>
<p><strong>5. Themes</strong>: Aparência geral (não afeta os dados) - <code>theme_minimal()</code>: minimalista - <code>theme_bw()</code>: preto e branco - <code>theme_classic()</code>: clássico - <code>theme()</code>: personalização completa</p>
</section>
<section id="a-lógica-do-soma-de-camadas" class="level3">
<h3 class="anchored" data-anchor-id="a-lógica-do-soma-de-camadas">A lógica do + (soma de camadas)</h3>
<p>Em ggplot2, você <strong>adiciona</strong> camadas com <code>+</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados, <span class="fu">aes</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2)) <span class="sc">+</span>  <span class="co"># Base</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span>                                   <span class="co"># Camada 1: pontos</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span>                                  <span class="co"># Camada 2: linha de tendência</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Meu gráfico"</span>) <span class="sc">+</span>                   <span class="co"># Camada 3: títulos</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()                                  <span class="co"># Camada 4: tema</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Importante:</strong> Use <code>+</code> no final da linha, não no início!</p>
</section>
<section id="aesthetics-globais-vs-locais" class="level3">
<h3 class="anchored" data-anchor-id="aesthetics-globais-vs-locais">Aesthetics globais vs locais</h3>
<p><strong>Global</strong> (no <code>ggplot()</code>): aplica-se a todas as camadas</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2, <span class="at">color =</span> grupo)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span>      <span class="co"># Usa cor</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()       <span class="co"># Também usa cor</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Local</strong> (dentro do <code>geom_*()</code>): aplica-se apenas àquela camada</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2)) <span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> grupo)) <span class="sc">+</span>  <span class="co"># Apenas pontos coloridos</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()                      <span class="co"># Linha sem cor</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Estrutura básica</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(data = dados, aes(x = var1, y = var2)) +</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point()</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo com palmerpenguins</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm)) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionar cor por espécie</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionar forma por ilha</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm, </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> species, <span class="at">shape =</span> island)) <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="tipos-de-gráficos-geoms" class="level2">
<h2 class="anchored" data-anchor-id="tipos-de-gráficos-geoms">2.2 Tipos de Gráficos (geoms)</h2>
<section id="escolhendo-o-tipo-certo-de-gráfico" class="level3">
<h3 class="anchored" data-anchor-id="escolhendo-o-tipo-certo-de-gráfico">Escolhendo o tipo certo de gráfico</h3>
<p><strong>Pergunte-se:</strong> 1. Quantas variáveis quero mostrar? (1, 2, 3+) 2. Que tipo de variáveis? (categórica vs numérica) 3. Qual história quero contar? (distribuição, relação, comparação, evolução)</p>
<p><strong>Guia rápido:</strong> - <strong>Relação entre 2 numéricas</strong> → Dispersão (geom_point) - <strong>Comparar categorias</strong> → Barras (geom_bar/geom_col) - <strong>Distribuição de 1 numérica</strong> → Histograma ou Densidade - <strong>Comparar distribuições</strong> → Boxplot ou Violin - <strong>Evolução temporal</strong> → Linhas (geom_line) - <strong>Parte do todo</strong> → Pizza (evite!) ou Barras empilhadas</p>
</section>
<section id="gráfico-de-dispersão-geom_point" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-de-dispersão-geom_point">Gráfico de Dispersão (geom_point)</h3>
<p><strong>Quando usar:</strong> - Mostrar relação entre duas variáveis numéricas - Identificar correlações, tendências ou padrões - Visualizar clusters ou outliers</p>
<p><strong>Parâmetros úteis:</strong> - <code>size</code>: tamanho dos pontos (número ou mapeado a variável) - <code>alpha</code>: transparência (útil quando há sobreposição) - <code>shape</code>: forma dos pontos (círculo, triângulo, quadrado, etc.) - <code>color</code>: cor (fixa ou mapeada a variável categórica)</p>
<p><strong>Dica:</strong> Use <code>geom_smooth()</code> junto para adicionar linha de tendência!</p>
<p><strong>Tipos de relação que você pode identificar:</strong> - Positiva: x aumenta, y aumenta - Negativa: x aumenta, y diminui - Não-linear: curva ou padrão complexo - Sem relação: pontos dispersos aleatoriamente</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dispersão básica</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Com cores e tamanhos</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> species, <span class="at">size =</span> bill_length_mm)) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionar linha de tendência</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species), <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gráfico-de-barras-geom_bar-geom_col" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-de-barras-geom_bar-geom_col">Gráfico de Barras (geom_bar / geom_col)</h3>
<p><strong>Diferença importante:</strong> - <strong>geom_bar()</strong>: conta automaticamente (para dados brutos) - Use quando: quer contar quantas vezes cada categoria aparece - Exemplo: quantos alunos de cada curso</p>
<ul>
<li><strong>geom_col()</strong>: usa valores que já estão calculados
<ul>
<li>Use quando: já tem os valores agregados</li>
<li>Exemplo: vendas totais por mês (já somadas)</li>
</ul></li>
</ul>
<p><strong>Quando usar barras:</strong> - Comparar quantidades entre categorias - Mostrar rankings - Visualizar composição (barras empilhadas) - Dados temporais discretos (meses, anos)</p>
<p><strong>Parâmetros importantes:</strong></p>
<p><strong>position</strong>: Como organizar múltiplas barras - <code>"stack"</code> (padrão): empilhadas uma sobre a outra - <code>"dodge"</code>: lado a lado - <code>"fill"</code>: empilhadas proporcionalmente (100%)</p>
<p><strong>width</strong>: Largura das barras (0-1) - Menor = barras mais finas com mais espaço</p>
<p><strong>fill vs color</strong>: - <code>fill</code>: cor de preenchimento da barra - <code>color</code>: cor da borda da barra</p>
<p><strong>Dicas de design:</strong> - Ordene categorias por valor (não alfabeticamente) - Use cores apenas quando necessário (não decore por decorar) - Evite 3D (distorce percepção) - Comece eixo y em zero (não engane visualmente) - Considere barras horizontais se nomes de categorias forem longos</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contagem (geom_bar)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Com preenchimento por outra variável</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Barras lado a lado</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporção (100%)</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Proporção"</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Barras horizontais</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">y =</span> species)) <span class="sc">+</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_col (quando você tem valores agregados)</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>resumo <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">massa_media =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resumo, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> massa_media)) <span class="sc">+</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="boxplot-geom_boxplot" class="level3">
<h3 class="anchored" data-anchor-id="boxplot-geom_boxplot">Boxplot (geom_boxplot)</h3>
<p><strong>O que é um boxplot?</strong></p>
<p>Um boxplot (ou diagrama de caixa) mostra a distribuição de dados através de quartis. É uma forma compacta de ver: - A mediana (linha central) - A dispersão (tamanho da caixa) - Outliers (pontos isolados)</p>
<p><strong>Anatomia do boxplot:</strong></p>
<pre><code>    máximo (ou Q3 + 1.5*IQR)
        │
    ┌───┴───┐
    │  Q3   │  ← 75% dos dados estão abaixo
    │───────│  ← mediana (Q2)
    │  Q1   │  ← 25% dos dados estão abaixo
    └───┬───┘
        │
    mínimo (ou Q1 - 1.5*IQR)
    
    ●  ← outliers (pontos fora do padrão)</code></pre>
<p><strong>Quando usar:</strong> - Comparar distribuições entre grupos - Identificar outliers - Ver simetria/assimetria dos dados - Quando tem muitas categorias (mais eficiente que múltiplos histogramas)</p>
<p><strong>Vantagens:</strong> - Mostra 5 estatísticas de uma vez (min, Q1, mediana, Q3, max) - Identifica outliers automaticamente - Compacto - fácil comparar muitos grupos</p>
<p><strong>Desvantagens:</strong> - Não mostra a forma exata da distribuição - Pode esconder bimodalidade (duas “montanhas”) - Menos intuitivo para público não-técnico</p>
<p><strong>Alternativas:</strong> - <strong>Violin plot</strong> (<code>geom_violin</code>): mostra a forma completa da distribuição - <strong>Jitter plot</strong> (<code>geom_jitter</code>): mostra todos os pontos individuais - <strong>Combinação</strong>: boxplot + jitter = melhor dos dois mundos</p>
<p><strong>Dicas:</strong> - Use <code>geom_jitter()</code> junto para mostrar pontos individuais - Ordene grupos por mediana para facilitar comparação - Use cores para distinguir grupos, mas não exagere</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot básico</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Com cores</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionar pontos individuais</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot (alternativa)</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gráfico-de-linhas-geom_line" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-de-linhas-geom_line">Gráfico de Linhas (geom_line)</h3>
<p><strong>Quando usar:</strong> - Dados temporais (séries temporais) - Mostrar tendências ou evolução - Dados com ordem natural (temperatura ao longo do dia) - Conectar pontos sequenciais</p>
<p><strong>CUIDADO:</strong> Não use linhas para: - Dados categóricos sem ordem (espécies, nomes) - Quando não há continuidade entre pontos</p>
<p><strong>Por que usar linhas em vez de barras para séries temporais?</strong> - Linhas enfatizam tendência e fluxo - Mais fácil ver mudanças ao longo do tempo - Menos “peso visual” quando há muitos pontos - Facilita comparação de múltiplas séries</p>
<p><strong>Parâmetros úteis:</strong> - <code>size</code>: espessura da linha - <code>linetype</code>: tipo de linha (sólida, tracejada, pontilhada) - <code>color</code>: cor da linha - <code>group</code>: quando tem múltiplas linhas</p>
<p><strong>Dica:</strong> Combine <code>geom_line()</code> + <code>geom_point()</code> para destacar valores individuais</p>
</section>
<section id="histograma-e-densidade-geom_histogram-geom_density" class="level3">
<h3 class="anchored" data-anchor-id="histograma-e-densidade-geom_histogram-geom_density">Histograma e Densidade (geom_histogram / geom_density)</h3>
<p><strong>Histograma (geom_histogram)</strong></p>
<p><strong>O que mostra:</strong> A distribuição de uma variável numérica dividida em “bins” (intervalos).</p>
<p><strong>Quando usar:</strong> - Entender a forma da distribuição (simétrica, assimétrica, bimodal) - Identificar moda (valor mais frequente) - Ver dispersão dos dados - Detectar outliers</p>
<p><strong>Parâmetro crítico: bins (ou binwidth)</strong> - <code>bins</code>: número de barras (padrão = 30) - <code>binwidth</code>: largura de cada barra - <strong>Importante:</strong> Número de bins muda a interpretação! - Poucos bins → padrões grosseiros, perde detalhes - Muitos bins → muito detalhado, difícil ver padrão geral - Teste diferentes valores!</p>
<p><strong>Tipos de distribuição que você pode identificar:</strong> - <strong>Normal</strong> (sino): simétrica, maioria no centro - <strong>Assimétrica positiva</strong>: cauda longa à direita - <strong>Assimétrica negativa</strong>: cauda longa à esquerda - <strong>Bimodal</strong>: duas “montanhas” (dois grupos distintos) - <strong>Uniforme</strong>: todas as barras similares (raro em dados reais)</p>
<p><strong>Densidade (geom_density)</strong></p>
<p><strong>O que mostra:</strong> Uma versão “suavizada” do histograma - uma curva contínua.</p>
<p><strong>Vantagens sobre histograma:</strong> - Não depende de escolha arbitrária de bins - Mais suave e fácil de interpretar - Melhor para comparar múltiplas distribuições sobrepostas - Mais “bonito” visualmente</p>
<p><strong>Desvantagens:</strong> - Pode ser menos intuitivo para público não-técnico - Pode suavizar demais e esconder detalhes</p>
<p><strong>Quando usar cada um:</strong> - <strong>Histograma</strong>: primeira exploração, apresentação para não-técnicos - <strong>Densidade</strong>: comparar grupos, análise mais refinada, publicações</p>
<p><strong>Dica:</strong> Use <code>alpha</code> (transparência) quando sobrepor múltiplas distribuições!</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar dados temporais</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>vendas_tempo <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vendas =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">150</span>, <span class="dv">140</span>, <span class="dv">170</span>, <span class="dv">190</span>, <span class="dv">200</span>, <span class="dv">210</span>, <span class="dv">195</span>, <span class="dv">220</span>, <span class="dv">240</span>, <span class="dv">250</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">custos =</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>, <span class="dv">95</span>, <span class="dv">110</span>, <span class="dv">120</span>, <span class="dv">125</span>, <span class="dv">130</span>, <span class="dv">120</span>, <span class="dv">135</span>, <span class="dv">145</span>, <span class="dv">150</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Linha simples</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vendas_tempo, <span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> vendas)) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Com pontos</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vendas_tempo, <span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> vendas)) <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Múltiplas linhas (precisa pivotear)</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>vendas_long <span class="ot">&lt;-</span> vendas_tempo <span class="sc">%&gt;%</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(vendas, custos), <span class="at">names_to =</span> <span class="st">"tipo"</span>, <span class="at">values_to =</span> <span class="st">"valor"</span>)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vendas_long, <span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> valor, <span class="at">color =</span> tipo)) <span class="sc">+</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="histograma-e-densidade-geom_histogram-geom_density-1" class="level3">
<h3 class="anchored" data-anchor-id="histograma-e-densidade-geom_histogram-geom_density-1">Histograma e Densidade (geom_histogram / geom_density)</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar número de bins</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">15</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Por grupo</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">position =</span> <span class="st">"identity"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Densidade</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Densidade por grupo</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="personalização" class="level2">
<h2 class="anchored" data-anchor-id="personalização">2.3 Personalização</h2>
<section id="labels-labs---comunicando-claramente" class="level3">
<h3 class="anchored" data-anchor-id="labels-labs---comunicando-claramente">Labels (labs) - Comunicando claramente</h3>
<p><strong>Por que labels são importantes?</strong></p>
<p>Um gráfico sem bons labels é como um livro sem capa - ninguém sabe do que se trata! Labels transformam um gráfico técnico em uma ferramenta de comunicação.</p>
<p><strong>Elementos de labs():</strong></p>
<ul>
<li><strong>title</strong>: Título principal - O QUE o gráfico mostra
<ul>
<li>Seja descritivo: “Relação entre…” não apenas “Gráfico 1”</li>
<li>Máximo 1-2 linhas</li>
</ul></li>
<li><strong>subtitle</strong>: Subtítulo - Contexto adicional ou detalhes
<ul>
<li>Informação complementar sobre período, amostra, etc.</li>
</ul></li>
<li><strong>x / y</strong>: Rótulos dos eixos - SEMPRE inclua unidades!
<ul>
<li>❌ “Massa”</li>
<li>✅ “Massa Corporal (g)”</li>
</ul></li>
<li><strong>color / fill / size / etc.</strong>: Legendas
<ul>
<li>Renomeie para termos claros: “Espécie” em vez de “species”</li>
</ul></li>
<li><strong>caption</strong>: Nota de rodapé - Fonte dos dados, créditos
<ul>
<li>Exemplo: “Fonte: Palmer Archipelago LTER”</li>
</ul></li>
</ul>
<p><strong>Regra de ouro:</strong> Seu gráfico deve se explicar sozinho. Uma pessoa que nunca viu seus dados deveria entender o que está sendo mostrado apenas olhando o gráfico.</p>
</section>
<section id="temas-themes---definindo-a-aparência" class="level3">
<h3 class="anchored" data-anchor-id="temas-themes---definindo-a-aparência">Temas (themes) - Definindo a aparência</h3>
<p><strong>O que são temas?</strong></p>
<p>Temas controlam a aparência <strong>não-dados</strong> do gráfico: cor de fundo, linhas de grade, fontes, etc. Não afetam os dados em si, apenas como são apresentados.</p>
<p><strong>Temas prontos (built-in):</strong></p>
<ul>
<li><strong>theme_gray()</strong> (padrão): fundo cinza, grade branca
<ul>
<li>Uso: padrão, nada especial</li>
</ul></li>
<li><strong>theme_bw()</strong>: preto e branco, fundo branco
<ul>
<li>Uso: impressão P&amp;B, publicações acadêmicas</li>
</ul></li>
<li><strong>theme_minimal()</strong>: minimalista, sem bordas
<ul>
<li>Uso: apresentações modernas, relatórios limpos</li>
<li><strong>Recomendado para iniciantes!</strong></li>
</ul></li>
<li><strong>theme_classic()</strong>: eixos simples, sem grades
<ul>
<li>Uso: estilo clássico, gráficos “científicos”</li>
</ul></li>
<li><strong>theme_dark()</strong>: fundo escuro
<ul>
<li>Uso: apresentações em projetores, dashboards</li>
</ul></li>
<li><strong>theme_void()</strong>: completamente limpo
<ul>
<li>Uso: mapas, visualizações artísticas</li>
</ul></li>
</ul>
<p><strong>Como personalizar temas?</strong></p>
<p>Use <code>theme()</code> para ajustar elementos específicos:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()  <span class="co"># Remove grade secundária</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Elementos ajustáveis:</strong> - <strong>element_text()</strong>: texto (título, eixos, legendas) - <strong>element_line()</strong>: linhas (eixos, grades) - <strong>element_rect()</strong>: retângulos (fundo, bordas) - <strong>element_blank()</strong>: remove o elemento</p>
<p><strong>Dica:</strong> Combine tema pronto + ajustes finos:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="escalas-scales---controle-fino" class="level3">
<h3 class="anchored" data-anchor-id="escalas-scales---controle-fino">Escalas (scales) - Controle fino</h3>
<p><strong>O que são scales?</strong></p>
<p>Scales controlam <strong>como</strong> os dados são mapeados para propriedades visuais. Toda aesthetic (x, y, color, size, etc.) tem uma scale.</p>
<p><strong>Por que ajustar scales?</strong> - Cores mais bonitas ou acessíveis - Eixos com quebras específicas - Transformações (log, sqrt) - Formatação de valores (moeda, percentual)</p>
<p><strong>Tipos principais:</strong></p>
<p><strong>1. Scales de posição (eixos x e y)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Controlar quebras e limites</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>),    <span class="co"># Onde mostrar marcas</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>),          <span class="co"># Limite do eixo</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)             <span class="co"># Remover espaço extra</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformações</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_log10</span>()                <span class="co"># Escala logarítmica</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_sqrt</span>()                 <span class="co"># Raiz quadrada</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_reverse</span>()              <span class="co"># Inverter eixo</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>2. Scales de cor</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cores manuais</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span>))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Paletas viridis (acessíveis para daltônicos!)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_viridis_d</span>()        <span class="co"># Discreta (categórica)</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_viridis_c</span>()        <span class="co"># Contínua (numérica)</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Paletas Brewer</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>3. Formatação com scales (pacote)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatar números</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>())      <span class="co"># 1,000</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>())    <span class="co"># 50%</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_dollar</span>())     <span class="co"># $100</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">prefix =</span> <span class="st">"R$ "</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">decimal.mark =</span> <span class="st">","</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">big.mark =</span> <span class="st">"."</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>))  <span class="co"># R$ 1.000,00</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Cores para daltônicos:</strong></p>
<p>Use paletas acessíveis! ~8% dos homens têm daltonismo.</p>
<p>✅ <strong>Boas escolhas:</strong> - <code>scale_color_viridis_d()</code> (melhor!) - <code>scale_color_brewer(palette = "Set2")</code> - Esquemas azul-laranja (distinguíveis)</p>
<p>❌ <strong>Evite:</strong> - Vermelho-verde (indistinguíveis para daltônicos) - Muitas cores similares</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Relação entre Nadadeira e Massa Corporal"</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Dados do Arquipélago Palmer, Antártica"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Comprimento da Nadadeira (mm)"</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Massa Corporal (g)"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Espécie"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Fonte: palmerpenguins package"</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="temas-themes" class="level3">
<h3 class="anchored" data-anchor-id="temas-themes">Temas (themes)</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Massa Corporal por Espécie"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema padrão (gray)</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>grafico_base</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema minimalista</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema BW</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="sc">+</span> <span class="fu">theme_bw</span>()</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema clássico</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="sc">+</span> <span class="fu">theme_classic</span>()</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema escuro</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="sc">+</span> <span class="fu">theme_dark</span>()</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizar tema</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>grafico_base <span class="sc">+</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="escalas-scales" class="level3">
<h3 class="anchored" data-anchor-id="escalas-scales">Escalas (scales)</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Escala de cores manual</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"purple"</span>, <span class="st">"cyan4"</span>))</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Escala de cores viridis (acessível e bonita)</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Escala de eixo</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">label_comma</span>(),  <span class="co"># Formatar números com vírgula</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">3000</span>, <span class="dv">6000</span>, <span class="dv">500</span>)</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformação logarítmica</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="combinando-gráficos-patchwork" class="level2">
<h2 class="anchored" data-anchor-id="combinando-gráficos-patchwork">2.4 Combinando Gráficos (patchwork)</h2>
<p><strong>Por que combinar gráficos?</strong></p>
<p>Muitas vezes você quer mostrar múltiplas visualizações relacionadas lado a lado: - Comparar diferentes aspectos dos mesmos dados - Mostrar “antes e depois” - Painéis para relatórios e apresentações - Contar uma história visual completa</p>
<p><strong>patchwork vs alternativas:</strong></p>
<ul>
<li><strong>Base R</strong> (<code>par(mfrow)</code>, <code>layout</code>): complexo, limitado</li>
<li><strong>gridExtra</strong> (<code>grid.arrange</code>): funcional mas verboso</li>
<li><strong>patchwork</strong>: simples, intuitivo, poderoso ✅</li>
</ul>
<p><strong>Sintaxe básica de patchwork:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># + : lado a lado (horizontal)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>grafico1 <span class="sc">+</span> grafico2</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># / : um em cima do outro (vertical)</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>grafico1 <span class="sc">/</span> grafico2</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar: () agrupa operações</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>(grafico1 <span class="sc">+</span> grafico2) <span class="sc">/</span> grafico3</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Operadores:</strong> - <code>+</code> : lado a lado - <code>/</code> : empilhar - <code>|</code> : lado a lado (alternativa ao +) - <code>()</code> : agrupar</p>
<p><strong>Layouts complexos:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2x2</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># L-shape</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> (g2 <span class="sc">/</span> g3)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Tamanhos diferentes</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> g2 <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))  <span class="co"># g1 é 2x mais largo</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Funcionalidades úteis:</strong></p>
<p><strong>1. plot_annotation()</strong>: Adicionar título geral e caption</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Análise Completa"</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Dados de 2024"</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Fonte: MinhaFonte"</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tag_levels =</span> <span class="st">"A"</span>  <span class="co"># Adiciona A, B, C, D...</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>2. plot_layout()</strong>: Controlar layout</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> g2 <span class="sc">+</span> g3 <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span>,              <span class="co"># Número de colunas</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">guides =</span> <span class="st">"collect"</span>,    <span class="co"># Coletar legendas</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>),  <span class="co"># Larguras relativas</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)      <span class="co"># Alturas relativas</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>3. Legendas unificadas:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4) <span class="sc">+</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span>  <span class="co"># &amp; aplica a todos</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Dicas de design:</strong> - Mantenha escalas consistentes entre gráficos relacionados - Use cores consistentes para mesmas categorias - Não sobrecarregue - máximo 4-6 painéis - Considere se um único gráfico com facetas seria melhor</p>
</section>
<section id="salvando-gráficos-ggsave" class="level2">
<h2 class="anchored" data-anchor-id="salvando-gráficos-ggsave">2.5 Salvando Gráficos (ggsave)</h2>
<p><strong>Por que usar ggsave?</strong></p>
<p>Você precisa salvar gráficos para: - Incluir em relatórios, artigos, apresentações - Compartilhar com colegas - Backup de visualizações importantes - Usar em outros softwares</p>
<p><strong>ggsave() é inteligente:</strong> - Detecta formato pela extensão (.png, .pdf, .jpg, etc.) - Ajusta resolução automaticamente - Salva o último gráfico por padrão (ou você especifica) - Funciona perfeitamente com here()</p>
<p><strong>Sintaxe básica:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">"meu_grafico.png"</span>,  <span class="co"># Nome e formato</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot =</span> meu_grafico,            <span class="co"># Qual gráfico (opcional)</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">8</span>,                     <span class="co"># Largura em polegadas</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">6</span>,                    <span class="co"># Altura em polegadas</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">dpi =</span> <span class="dv">300</span>                      <span class="co"># Resolução (pontos por polegada)</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Formatos e quando usar:</strong></p>
<p><strong>1. PNG (.png)</strong> - <strong>Raster</strong> (pixels) - ✅ Bom para: web, apresentações, compartilhamento rápido - ✅ Suporta transparência - ✅ Tamanho razoável com boa qualidade - ❌ Perde qualidade ao ampliar muito - <strong>DPI recomendado:</strong> 300 (alta qualidade), 150 (web)</p>
<p><strong>2. PDF (.pdf)</strong> - <strong>Vetor</strong> (matemático) - ✅ Bom para: publicações acadêmicas, impressão profissional - ✅ Escala infinitamente sem perder qualidade - ✅ Tamanho pequeno para gráficos simples - ❌ Pode ser grande com muitos pontos - <strong>Sem DPI</strong> (vetor não tem pixels)</p>
<p><strong>3. SVG (.svg)</strong> - <strong>Vetor</strong> (para web) - ✅ Bom para: web, design, editável em Illustrator - ✅ Escala perfeitamente - ✅ Pode ser editado como código - ❌ Suporte limitado em alguns contextos - <strong>Sem DPI</strong> (vetor)</p>
<p><strong>4. JPEG (.jpg)</strong> - <strong>Raster</strong> (pixels) - ✅ Tamanho muito pequeno - ❌ Perde qualidade (compressão) - ❌ Não suporta transparência - <strong>Evite para gráficos!</strong> (Use PNG)</p>
<p><strong>5. TIFF (.tiff)</strong> - <strong>Raster</strong> (pixels) - ✅ Alta qualidade sem compressão - ✅ Aceito em publicações - ❌ Arquivos muito grandes - <strong>Use apenas se exigido</strong></p>
<p><strong>Configurações importantes:</strong></p>
<p><strong>DPI (Dots Per Inch) - resolução:</strong> - <strong>72 dpi</strong>: tela de computador (baixa qualidade) - <strong>150 dpi</strong>: apresentações, web (qualidade média) - <strong>300 dpi</strong>: impressão, publicações (alta qualidade) ✅ - <strong>600 dpi</strong>: impressão profissional (raramente necessário)</p>
<p><strong>Tamanho (width e height):</strong> - Padrão: polegadas (inches) - 1 polegada = 2.54 cm - Tamanhos comuns: - <strong>Apresentação slide:</strong> 10 x 7.5 polegadas (16:9) - <strong>Artigo coluna única:</strong> 3.5 x 3.5 polegadas - <strong>Artigo largura total:</strong> 7 x 5 polegadas - <strong>Poster:</strong> 24 x 18 polegadas</p>
<p><strong>Boas práticas:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use here() para portabilidade</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"figures"</span>, <span class="st">"massa_especies.png"</span>),</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">6</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">dpi =</span> <span class="dv">300</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">"white"</span>  <span class="co"># Fundo branco (útil com temas transparentes)</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar em múltiplos formatos</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (fmt <span class="cf">in</span> <span class="fu">c</span>(<span class="st">"png"</span>, <span class="st">"pdf"</span>, <span class="st">"svg"</span>)) {</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"figures"</span>, <span class="fu">paste0</span>(<span class="st">"grafico."</span>, fmt)),</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot =</span> meu_grafico,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">6</span>,</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">dpi =</span> <span class="dv">300</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Resolução de problemas:</strong></p>
<p><strong>Texto muito pequeno/grande:</strong> - Ajuste <code>width</code> e <code>height</code> (não <code>dpi</code>) - Ou ajuste tamanhos de fonte no gráfico antes de salvar</p>
<p><strong>Arquivo muito grande:</strong> - PNG: reduza DPI para 150 - PDF com muitos pontos: converta para PNG - Simplifique o gráfico (menos pontos, objetos)</p>
<p><strong>Cores diferentes do RStudio:</strong> - Especifique <code>bg = "white"</code> (ou cor de fundo desejada) - Alguns temas têm fundo transparente por padrão</p>
<p><strong>Eixos cortados:</strong> - Adicione <code>scale_y_continuous(expand = expansion(mult = 0.05))</code> - Ou ajuste margens: <code>theme(plot.margin = margin(1, 1, 1, 1, "cm"))</code></p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar vários gráficos</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contagem por Espécie"</span>) <span class="sc">+</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribuição de Massa"</span>) <span class="sc">+</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Nadadeira vs Massa"</span>) <span class="sc">+</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>g4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> bill_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bico por Espécie"</span>) <span class="sc">+</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar lado a lado</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> g2</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar em cima/embaixo</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">/</span> g2</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Layout complexo</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4)</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Com título geral</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4) <span class="sc">+</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Análise Exploratória de Pinguins"</span>,</span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Palmer Archipelago, Antarctica"</span>,</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Dados: palmerpenguins"</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Coletar legendas</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>(g1 <span class="sc">+</span> g2) <span class="sc">/</span> (g3 <span class="sc">+</span> g4) <span class="sc">+</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="salvando-gráficos-ggsave-1" class="level2">
<h2 class="anchored" data-anchor-id="salvando-gráficos-ggsave-1">2.5 Salvando Gráficos (ggsave)</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar gráfico</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>meu_grafico <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Massa Corporal por Espécie de Pinguim"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Espécie"</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Massa Corporal (g)"</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como PNG</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave(</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   filename = here("output", "figures", "massa_especies.png"),</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   plot = meu_grafico,</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   width = 8,</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   height = 6,</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   dpi = 300</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar como PDF (vetorial)</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave(</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   filename = here("output", "figures", "massa_especies.pdf"),</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   plot = meu_grafico,</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a><span class="co">#   width = 8,</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   height = 6</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Salvar último gráfico criado</span></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave(here("output", "figures", "ultimo_grafico.png"), dpi = 300)</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Diferentes formatos</span></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("grafico.png")   # PNG</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("grafico.pdf")   # PDF</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("grafico.svg")   # SVG (escalável)</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave("grafico.jpg")   # JPEG</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="exercícios-práticos" class="level2">
<h2 class="anchored" data-anchor-id="exercícios-práticos">Exercícios Práticos</h2>
<section id="exercício-1-transformação-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="exercício-1-transformação-de-dados">Exercício 1: Transformação de dados</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados de temperatura (wide)</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>temp_wide <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">cidade =</span> <span class="fu">c</span>(<span class="st">"São Paulo"</span>, <span class="st">"Rio de Janeiro"</span>, <span class="st">"Belo Horizonte"</span>),</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">jan =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">28</span>, <span class="dv">24</span>),</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fev =</span> <span class="fu">c</span>(<span class="dv">26</span>, <span class="dv">29</span>, <span class="dv">25</span>),</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">27</span>, <span class="dv">23</span>),</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">abr =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">21</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co"># a) Transforme para formato long</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co"># b) Calcule temperatura média por cidade</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="co"># c) Qual cidade teve maior variação?</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="co"># d) Crie gráfico de linhas mostrando temperatura ao longo dos meses</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="exercício-2-limpeza-e-io" class="level3">
<h3 class="anchored" data-anchor-id="exercício-2-limpeza-e-io">Exercício 2: Limpeza e I/O</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a) Crie um dataset com nomes de colunas bagunçados e limpe com janitor</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># b) Adicione algumas linhas com NA e trate-os adequadamente</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># c) Salve o dataset limpo como CSV usando here()</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co"># d) Leia o arquivo de volta e confirme que está correto</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="exercício-3-visualização-completa" class="level3">
<h3 class="anchored" data-anchor-id="exercício-3-visualização-completa">Exercício 3: Visualização completa</h3>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use o dataset penguins para criar:</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># a) Um gráfico de dispersão relacionando duas variáveis numéricas</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># b) Um boxplot comparando espécies</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># c) Um histograma da distribuição de massa corporal</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="co"># d) Combine os 3 gráficos usando patchwork</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co"># e) Personalize com temas, cores e labels apropriados</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="co"># f) Salve o resultado final com ggsave()</span></span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="commit-do-dia" class="level2">
<h2 class="anchored" data-anchor-id="commit-do-dia">Commit do Dia</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add scripts/03_transformacao_viz.R</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Dia 3: transformação, I/O e visualização com ggplot2"</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="checklist-de-encerramento" class="level2">
<h2 class="anchored" data-anchor-id="checklist-de-encerramento">Checklist de Encerramento</h2>
<ul class="task-list">
<li><label><input type="checkbox">Dominou pivot_longer e pivot_wider</label></li>
<li><label><input type="checkbox">Entendeu separate e unite</label></li>
<li><label><input type="checkbox">Sabe tratar valores ausentes</label></li>
<li><label><input type="checkbox">Consegue ler CSV e Excel</label></li>
<li><label><input type="checkbox">Organiza projetos com here()</label></li>
<li><label><input type="checkbox">Conhece janitor e skimr</label></li>
<li><label><input type="checkbox">Cria gráficos básicos com ggplot2</label></li>
<li><label><input type="checkbox">Personaliza gráficos (temas, cores, labels)</label></li>
<li><label><input type="checkbox">Combina gráficos com patchwork</label></li>
<li><label><input type="checkbox">Salva gráficos com ggsave()</label></li>
<li><label><input type="checkbox">Fez commit no seu fork</label></li>
</ul>
<hr>
</section>
<section id="referências-rápidas" class="level2">
<h2 class="anchored" data-anchor-id="referências-rápidas">Referências Rápidas</h2>
<ul>
<li><strong>ggplot2 cheatsheet</strong>: https://posit.co/resources/cheatsheets/</li>
<li><strong>R for Data Science - Data Visualization</strong>: https://r4ds.hadley.nz/data-visualize</li>
<li><strong>tidyr documentation</strong>: https://tidyr.tidyverse.org/</li>
<li><strong>patchwork</strong>: https://patchwork.data-imaginist.com/</li>
<li><strong>R Graph Gallery</strong>: https://r-graph-gallery.com/</li>
</ul>
<hr>
<p><strong>Amanhã no Dia 4:</strong> Integração do ChatGPT e Claude no RStudio! 🤖</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>